name: Secrets Check

on:
  workflow_dispatch:
  push:
    branches: [ main, master ]

jobs:
  check-secrets:
    runs-on: ubuntu-latest
    env:
      VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
      VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}
      VERCEL_PROJECT_ID: ${{ secrets.VERCEL_PROJECT_ID }}
      RENDER_API_KEY: ${{ secrets.RENDER_API_KEY }}
      RENDER_SERVICE_ID: ${{ secrets.RENDER_SERVICE_ID }}
      FIREBASE_PROJECT_ID: ${{ secrets.FIREBASE_PROJECT_ID }}
      FIREBASE_CLIENT_EMAIL: ${{ secrets.FIREBASE_CLIENT_EMAIL }}
      FIREBASE_PRIVATE_KEY: ${{ secrets.FIREBASE_PRIVATE_KEY }}

    steps:
      - name: Check for required secrets
        run: |
          missing=""
          for s in VERCEL_TOKEN VERCEL_PROJECT_ID RENDER_API_KEY RENDER_SERVICE_ID FIREBASE_PROJECT_ID FIREBASE_CLIENT_EMAIL FIREBASE_PRIVATE_KEY; do
            eval val="\$$s"
            if [ -z "$val" ]; then
              missing="$missing $s"
            fi
          done
          if [ -n "$missing" ]; then
            echo "Missing secrets:$missing"
            exit 1
          fi
          echo "All required secrets appear to be set."
